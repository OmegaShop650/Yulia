<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Конструктор сайту | РетроШвейка</title>
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: {
              50: '#f0f9ff',
              100: '#e0f2fe',
              200: '#bae6fd',
              300: '#7dd3fc',
              400: '#38bdf8',
              500: '#0ea5e9',
              600: '#0284c7',
              700: '#0369a1',
              800: '#075985',
              900: '#0c4a6e',
            },
            secondary: {
              50: '#f9fafb',
              100: '#f3f4f6',
              200: '#e5e7eb',
              300: '#d1d5db',
              400: '#9ca3af',
              500: '#6b7280',
              600: '#4b5563',
              700: '#374151',
              800: '#1f2937',
              900: '#111827',
            },
            accent: {
              50: '#fef2f2',
              100: '#fee2e2',
              200: '#fecaca',
              300: '#fca5a5',
              400: '#f87171',
              500: '#ef4444',
              600: '#dc2626',
              700: '#b91c1c',
              800: '#991b1b',
              900: '#7f1d1d',
            }
          },
          fontFamily: {
            sans: ['Inter', 'system-ui', 'sans-serif'],
            heading: ['"Playfair Display"', 'serif']
          }
        }
      }
    }
  </script>
  <!-- Google Fonts -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Playfair+Display:wght@400;700&display=swap">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    
    :root {
      --primary-50: #f0f9ff;
      --primary-100: #e0f2fe;
      --primary-600: #0284c7;
      --primary-700: #0369a1;
      --secondary-100: #f3f4f6;
      --secondary-700: #374151;
      --accent-500: #ef4444;
      --accent-600: #dc2626;
      --border-radius: 12px;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    * {
      scrollbar-width: thin;
      scrollbar-color: #cbd5e1 #f1f5f9;
    }
    
    *::-webkit-scrollbar {
      width: 8px;
    }
    
    *::-webkit-scrollbar-track {
      background: #f1f5f9;
      border-radius: 4px;
    }
    
    *::-webkit-scrollbar-thumb {
      background-color: #cbd5e1;
      border-radius: 4px;
      border: 2px solid #f1f5f9;
    }
    
    body {
      background: linear-gradient(135deg, #f8fafc, #f1f5f9);
      font-family: 'Inter', sans-serif;
      color: var(--secondary-700);
      min-height: 100vh;
      transition: var(--transition);
    }
    
    .card {
      background: white;
      border-radius: var(--border-radius);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      transition: var(--transition);
    }
    
    .card:hover {
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      transform: translateY(-2px);
    }
    
    .section-title {
      font-family: 'Playfair Display', serif;
      font-weight: 700;
      color: var(--primary-700);
      position: relative;
      padding-bottom: 0.75rem;
    }
    
    .section-title::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 50px;
      height: 3px;
      background: var(--primary-600);
      border-radius: 3px;
    }
    
    .tab-btn {
      position: relative;
      padding: 0.75rem 1.25rem;
      font-weight: 500;
      color: var(--secondary-600);
      cursor: pointer;
      transition: var(--transition);
      border-bottom: 2px solid transparent;
    }
    
    .tab-btn.active {
      color: var(--primary-700);
      border-bottom: 2px solid var(--primary-600);
      font-weight: 600;
    }
    
    .tab-btn:hover:not(.active) {
      color: var(--primary-700);
    }
    
    .form-control {
      margin-bottom: 1.25rem;
    }
    
    label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 500;
      color: var(--secondary-700);
    }
    
    .input, .textarea, .select {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      font-size: 0.95rem;
      transition: var(--transition);
      font-family: 'Inter', sans-serif;
    }
    
    .input:focus, .textarea:focus, .select:focus {
      outline: none;
      border-color: var(--primary-500);
      box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.15);
    }
    
    .textarea {
      min-height: 100px;
      resize: vertical;
    }
    
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      border: none;
      font-family: 'Inter', sans-serif;
    }
    
    .btn-primary {
      background: var(--primary-600);
      color: white;
    }
    
    .btn-primary:hover {
      background: var(--primary-700);
      transform: translateY(-1px);
      box-shadow: 0 4px 6px -1px rgba(2, 132, 199, 0.2);
    }
    
    .btn-secondary {
      background: var(--secondary-100);
      color: var(--secondary-700);
    }
    
    .btn-secondary:hover {
      background: var(--secondary-200);
    }
    
    .btn-danger {
      background: var(--accent-500);
      color: white;
    }
    
    .btn-danger:hover {
      background: var(--accent-600);
    }
    
    .btn-icon {
      padding: 0.6rem;
      border-radius: 8px;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
    }
    
    .sortable {
      cursor: grab;
      transition: var(--transition);
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 0.75rem;
      display: flex;
      align-items: center;
    }
    
    .sortable:active {
      cursor: grabbing;
    }
    
    .sortable:hover {
      border-color: var(--primary-300);
      background-color: var(--primary-50);
    }
    
    .drag-handle {
      margin-right: 0.75rem;
      color: var(--secondary-500);
      cursor: grab;
      padding: 0.25rem;
      border-radius: 6px;
      opacity: 0.7;
    }
    
    .drag-handle:active {
      cursor: grabbing;
    }
    
    .image-upload {
      border: 1px dashed #cbd5e1;
      border-radius: 8px;
      padding: 1.25rem;
      text-align: center;
      cursor: pointer;
      transition: var(--transition);
      background: var(--secondary-50);
    }
    
    .image-upload:hover {
      border-color: var(--primary-400);
      background-color: var(--primary-50);
    }
    
    .image-upload img {
      max-height: 140px;
      margin: 0 auto 0.75rem;
      border-radius: 6px;
      object-fit: cover;
      width: 100%;
      height: 140px;
    }
    
    .product-card-admin {
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      overflow: hidden;
      transition: var(--transition);
    }
    
    .product-card-admin:hover {
      border-color: var(--primary-300);
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    }
    
    .product-img-admin {
      width: 100%;
      height: 160px;
      object-fit: cover;
    }
    
    .floating {
      animation: floating 3s ease-in-out infinite;
    }
    
    @keyframes floating {
      0% { transform: translateY(0px); }
      50% { transform: translateY(-8px); }
      100% { transform: translateY(0px); }
    }
    
    .pulse {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
    
    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: .7; }
    }
    
    .scale-in {
      animation: scaleIn 0.3s ease forwards;
    }
    
    @keyframes scaleIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }
    
    .slide-in {
      animation: slideIn 0.4s ease forwards;
    }
    
    @keyframes slideIn {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }
    
    .notification {
      position: fixed;
      top: 1.5rem;
      right: 1.5rem;
      padding: 1rem 1.5rem;
      border-radius: 8px;
      color: white;
      font-weight: 500;
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      transform: translateX(120%);
      transition: transform 0.3s ease;
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }
    
    .notification.show {
      transform: translateX(0);
    }
    
    .notification.success {
      background: #10b981;
    }
    
    .notification.error {
      background: #ef4444;
    }
    
    .notification.warning {
      background: #f59e0b;
    }
    
    .notification-icon {
      font-size: 1.25rem;
    }
    
    .tab-content {
      display: none;
    }
    
    .tab-content.active {
      display: block;
      animation: slideIn 0.3s ease;
    }
    
    .color-option {
      width: 28px;
      height: 28px;
      border-radius: 50%;
      cursor: pointer;
      border: 2px solid transparent;
      transition: var(--transition);
    }
    
    .color-option.active {
      border-color: white;
      box-shadow: 0 0 0 2px var(--secondary-700);
    }
    
    .range-slider {
      -webkit-appearance: none;
      appearance: none;
      width: 100%;
      height: 6px;
      border-radius: 3px;
      background: #e2e8f0;
      outline: none;
    }
    
    .range-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 18px;
      height: 18px;
      border-radius: 50%;
      background: var(--primary-600);
      cursor: pointer;
      transition: var(--transition);
      border: 2px solid white;
      box-shadow: 0 2px 4px rgba(2, 132, 199, 0.3);
    }
    
    .range-slider::-webkit-slider-thumb:hover {
      transform: scale(1.2);
      background: var(--primary-700);
    }
    
    .tooltip {
      position: relative;
      display: inline-block;
    }
    
    .tooltip .tooltip-text {
      visibility: hidden;
      width: 200px;
      background-color: var(--secondary-800);
      color: #fff;
      text-align: center;
      border-radius: 6px;
      padding: 0.5rem;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      margin-left: -100px;
      opacity: 0;
      transition: opacity 0.3s;
      font-size: 0.85rem;
      line-height: 1.4;
    }
    
    .tooltip .tooltip-text::after {
      content: "";
      position: absolute;
      top: 100%;
      left: 50%;
      margin-left: -5px;
      border-width: 5px;
      border-style: solid;
      border-color: var(--secondary-800) transparent transparent transparent;
    }
    
    .tooltip:hover .tooltip-text {
      visibility: visible;
      opacity: 1;
    }
    
    .divider {
      height: 1px;
      background: #e2e8f0;
      margin: 1.5rem 0;
    }
    
    .status-badge {
      display: inline-flex;
      align-items: center;
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 500;
    }
    
    .status-badge.online {
      background: #dcfce7;
      color: #166534;
    }
    
    .status-badge.offline {
      background: #fee2e2;
      color: #b91c1c;
    }
    
    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      height: 100vh;
      width: 80px;
      background: white;
      border-right: 1px solid #e2e8f0;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 1.5rem;
      z-index: 50;
      transition: var(--transition);
    }
    
    .sidebar:hover {
      width: 240px;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
    }
    
    .sidebar:hover .sidebar-icon {
      display: none;
    }
    
    .sidebar:hover .sidebar-text {
      display: inline;
    }
    
    .sidebar-item {
      width: 100%;
      padding: 0.75rem 1.5rem;
      display: flex;
      align-items: center;
      cursor: pointer;
      transition: var(--transition);
      position: relative;
    }
    
    .sidebar-item:hover {
      background: var(--primary-50);
      color: var(--primary-700);
    }
    
    .sidebar-item.active {
      background: var(--primary-50);
      color: var(--primary-700);
      border-left: 3px solid var(--primary-600);
    }
    
    .sidebar-icon {
      font-size: 1.25rem;
      width: 24px;
      text-align: center;
    }
    
    .sidebar-text {
      display: none;
      margin-left: 0.75rem;
      font-weight: 500;
    }
    
    .mobile-menu-btn {
      display: none;
      background: none;
      border: none;
      font-size: 1.25rem;
      color: var(--secondary-700);
      cursor: pointer;
    }
    
    .main-content {
      margin-left: 80px;
      transition: var(--transition);
    }
    
    @media (max-width: 1024px) {
      .sidebar {
        width: 70px;
      }
      
      .sidebar:hover {
        width: 240px;
      }
      
      .main-content {
        margin-left: 70px;
      }
    }
    
    @media (max-width: 768px) {
      .sidebar {
        left: -240px;
        z-index: 60;
      }
      
      .sidebar.open {
        left: 0;
      }
      
      .main-content {
        margin-left: 0;
      }
      
      .mobile-menu-btn {
        display: block;
      }
      
      .sidebar-item {
        justify-content: flex-start;
      }
    }
    
    .preview-panel {
      position: fixed;
      right: 1.5rem;
      bottom: 1.5rem;
      z-index: 40;
    }
    
    .preview-btn {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
      cursor: pointer;
      transition: var(--transition);
    }
    
    .preview-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
    }
    
    .loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(255, 255, 255, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
      display: none;
    }
    
    .spinner {
      width: 40px;
      height: 40px;
      border: 3px solid var(--primary-100);
      border-top: 3px solid var(--primary-600);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .search-box {
      position: relative;
    }
    
    .search-box i {
      position: absolute;
      left: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #94a3b8;
    }
    
    .search-box input {
      padding-left: 36px;
    }
    
    .badge {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 0.2rem 0.6rem;
      border-radius: 20px;
      font-size: 0.75rem;
      font-weight: 500;
    }
    
    .badge-primary {
      background: var(--primary-100);
      color: var(--primary-700);
    }
    
    .badge-success {
      background: #dcfce7;
      color: #166534;
    }
    
    .badge-danger {
      background: #fee2e2;
      color: #b91c1c;
    }
    
    .product-tag {
      display: inline-block;
      padding: 0.2rem 0.5rem;
      border-radius: 6px;
      font-size: 0.75rem;
      margin-right: 0.3rem;
      margin-bottom: 0.3rem;
    }
    
    .drag-preview {
      transform: scale(1.03);
      box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
      background: var(--primary-50);
      border-color: var(--primary-300);
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-800 min-h-screen">
  <!-- Mobile Menu Button -->
  <button class="mobile-menu-btn lg:hidden fixed top-4 left-4 z-50" id="mobileMenuBtn">
    <i class="fas fa-bars"></i>
  </button>

  <!-- Sidebar Navigation -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-item active" data-tab="content">
      <div class="sidebar-icon">
        <i class="fas fa-pen"></i>
      </div>
      <div class="sidebar-text">Контент</div>
    </div>
    <div class="sidebar-item" data-tab="products">
      <div class="sidebar-icon">
        <i class="fas fa-box-open"></i>
      </div>
      <div class="sidebar-text">Товари</div>
    </div>
    <div class="sidebar-item" data-tab="design">
      <div class="sidebar-icon">
        <i class="fas fa-palette"></i>
      </div>
      <div class="sidebar-text">Дизайн</div>
    </div>
    <div class="sidebar-item" data-tab="layout">
      <div class="sidebar-icon">
        <i class="fas fa-columns"></i>
      </div>
      <div class="sidebar-text">Розташування</div>
    </div>
    <div class="mt-auto w-full">
      <div class="sidebar-item tooltip" id="previewSiteBtn">
        <div class="sidebar-icon">
          <i class="fas fa-eye"></i>
        </div>
        <div class="sidebar-text">Переглянути сайт</div>
        <span class="tooltip-text">Переглянути поточний стан сайту</span>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
      <!-- Header -->
      <header class="card mb-6 p-4 flex justify-between items-center">
        <div>
          <h1 class="text-2xl font-bold text-primary-700 floating">Конструктор сайту</h1>
          <p class="text-secondary-600 mt-1">Налаштуйте свій сайт за кілька хвилин</p>
        </div>
        <div class="flex items-center gap-3">
          <div class="status-badge online">
            <i class="fas fa-circle mr-1 text-xs"></i> Онлайн
          </div>
          <div class="relative">
            <div class="w-10 h-10 rounded-full bg-primary-100 flex items-center justify-center">
              <span class="text-primary-700 font-semibold">Y</span>
            </div>
            <div class="absolute bottom-0 right-0 w-3 h-3 bg-green-500 border-2 border-white rounded-full"></div>
          </div>
        </div>
      </header>

      <!-- Content Tabs -->
      <div class="card mb-6">
        <div class="border-b px-4">
          <div class="flex overflow-x-auto pb-2">
            <div class="tab-btn active" data-tab="content">📝 Контент</div>
            <div class="tab-btn" data-tab="products">🛍️ Товари</div>
            <div class="tab-btn" data-tab="design">🎨 Дизайн</div>
            <div class="tab-btn" data-tab="layout">🔄 Розташування</div>
          </div>
        </div>
        
        <!-- Content Tab -->
        <div class="tab-content active p-4" id="contentTab">
          <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
            <div class="form-control slide-in" style="animation-delay: 0.1s">
              <label for="siteName">Назва сайту</label>
              <input type="text" id="siteName" class="input" value="РетроШвейка">
              <p class="text-secondary-500 text-sm mt-1">Це буде відображатися в заголовку та в браузерній вкладці</p>
            </div>
            <div class="form-control slide-in" style="animation-delay: 0.2s">
              <label for="telegramLink">Telegram</label>
              <input type="text" id="telegramLink" class="input" value="@Ennifer86">
              <p class="text-secondary-500 text-sm mt-1">Основний Telegram для зв'язку з клієнтами</p>
            </div>
          </div>
          
          <div class="form-control slide-in mb-6" style="animation-delay: 0.3s">
            <label for="footerText">Текст у футері</label>
            <input type="text" id="footerText" class="input" value="© 2024 Юлія. Усі права захищені. Створено з любов'ю.">
          </div>
          
          <div class="section-title mb-6 slide-in" style="animation-delay: 0.4s">Налаштування зворотного зв'язку</div>
          
          <div class="grid grid-cols-1 md:grid-cols-3 gap-6 slide-in" style="animation-delay: 0.5s">
            <div class="form-control">
              <label for="feedbackTelegram">Telegram для зворотного зв'язку</label>
              <input type="text" id="feedbackTelegram" class="input" value="@Ennifer86">
            </div>
            <div class="form-control">
              <label for="feedbackEmail">Email для зворотного зв'язку</label>
              <input type="email" id="feedbackEmail" class="input" value="yulia.retro@gmail.com">
            </div>
            <div class="form-control">
              <label for="feedbackPhone">Телефон для зворотного зв'язку</label>
              <input type="tel" id="feedbackPhone" class="input" value="+38 (098) 765-43-21">
            </div>
          </div>
          
          <!-- Нові поля для текстів -->
          <div class="section-title mb-6 slide-in mt-8" style="animation-delay: 0.6s">Тексти сайту</div>
          
          <div class="grid grid-cols-1 gap-6 slide-in" style="animation-delay: 0.7s">
            <div class="form-control">
              <label for="productsTitle">Заголовок розділу "Наші вироби"</label>
              <input type="text" id="productsTitle" class="input" value="Наші вироби">
            </div>
            <div class="form-control">
              <label for="productsDescription">Опис розділу "Наші вироби"</label>
              <textarea id="productsDescription" class="textarea">Унікальні ретро вироби, створені з якісних матеріалів. Кожен виріб — це мініатюрне мистецтво.</textarea>
            </div>
            
            <div class="form-control">
              <label for="contactsTitle">Заголовок розділу "Контакти"</label>
              <input type="text" id="contactsTitle" class="input" value="Контакти">
            </div>
            <div class="form-control">
              <label for="contactsDescription">Опис розділу "Контакти"</label>
              <textarea id="contactsDescription" class="textarea">Готові замовити виріб або дізнатися більше? Зв'яжіться зі мною!</textarea>
            </div>
            
            <div class="form-control">
              <label for="aboutTitle">Заголовок розділу "Про мене"</label>
              <input type="text" id="aboutTitle" class="input" value="Про мене">
            </div>
            <div class="form-control">
              <label for="aboutDescription">Опис розділу "Про мене"</label>
              <textarea id="aboutDescription" class="textarea">Мене звати Олена (Юлія), і я займаюся швейною справою вже 12 років. Моє захоплення ретро стилем почалося зі спадщини моєї бабусі — старовинної швейної машинки і колекції вишитих серветок.

Кожен виріб, який я створюю, — це унікальна річ, зроблена вручну з любов'ю до деталей. Я використовую якісні натуральні тканини, старовинні вишивки та класичні фасони, які ніколи не виходять з моди.

Моя мрія — повернути до життя красу ретро стилю і подарувати людям унікальні речі, які будуть радувати роками.</textarea>
            </div>
            
            <div class="form-control">
              <label for="heroTitle">Заголовок головної сторінки</label>
              <input type="text" id="heroTitle" class="input" value="Ретро швейні вироби">
            </div>
            <div class="form-control">
              <label for="heroSubtitle">Підзаголовок головної сторінки</label>
              <input type="text" id="heroSubtitle" class="input" value="з душею">
            </div>
            <div class="form-control">
              <label for="heroDescription">Опис головної сторінки</label>
              <textarea id="heroDescription" class="textarea">У нашій колекції ви знайдете стильні, зручні та унікальні вироби, створені з любов'ю та увагою до деталей.</textarea>
            </div>
          </div>
        </div>
        
        <!-- Products Tab -->
        <div class="tab-content p-4" id="productsTab">
          <!-- Add New Product Card -->
          <div class="card p-5 mb-6 scale-in" style="animation-delay: 0.1s">
            <div class="flex items-center mb-4">
              <div class="w-10 h-10 rounded-lg bg-primary-100 flex items-center justify-center mr-3">
                <i class="fas fa-plus text-primary-600"></i>
              </div>
              <h3 class="text-lg font-semibold text-primary-700">Додати новий товар</h3>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
              <div class="form-control">
                <label for="newProdNameUa">Назва (UA)</label>
                <input type="text" id="newProdNameUa" class="input" placeholder="Наприклад: Сукня в стилі ретро">
              </div>
              <div class="form-control">
                <label for="newProdNameEn">Назва (EN)</label>
                <input type="text" id="newProdNameEn" class="input" placeholder="Наприклад: Retro Style Dress">
              </div>
              <div class="form-control">
                <label for="newProdPrice">Ціна (₴)</label>
                <input type="text" id="newProdPrice" class="input" placeholder="Наприклад: 1500">
              </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-5 mb-5">
              <div class="form-control">
                <label for="newProdDescUa">Опис (UA)</label>
                <textarea id="newProdDescUa" class="textarea" placeholder="Детальний опис товару на українській"></textarea>
              </div>
              <div class="form-control">
                <label for="newProdDescEn">Опис (EN)</label>
                <textarea id="newProdDescEn" class="textarea" placeholder="Детальний опис товару на англійській"></textarea>
              </div>
            </div>
            
            <div class="form-control mb-5">
              <label>Фото товару</label>
              <div class="image-upload" onclick="document.getElementById('newProdImageInput').click()">
                <img id="newProdImagePreview" src="https://placehold.co/300x300/e2e8f0/64748b?text=Завантажте+фото" alt="Фото товару">
                <span class="text-secondary-600">Клацніть, щоб завантажити фото</span>
              </div>
              <input type="file" id="newProdImageInput" accept="image/*" style="display: none;">
              <p class="text-secondary-500 text-sm mt-1">Рекомендований розмір: 800x800 пікселів</p>
            </div>
            
            <button id="addProductBtn" class="btn btn-primary w-full">
              <i class="fas fa-plus mr-2"></i> Додати товар
            </button>
          </div>
          
          <!-- Existing Products -->
          <div class="section-title mb-4">Існуючі товари</div>
          
          <div class="mb-4 flex justify-between items-center">
            <div class="text-secondary-600">
              <span id="productsCount">0</span> товарів
            </div>
            <div class="search-box">
              <i class="fas fa-search"></i>
              <input type="text" id="productsSearch" class="input" placeholder="Пошук товарів..." style="width: 200px;">
            </div>
          </div>
          
          <div id="productsList" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5"></div>
        </div>
        
        <!-- Design Tab -->
        <div class="tab-content p-4" id="designTab">
          <div class="grid grid-cols-1 gap-6">
            <div>
              <div class="section-title mb-5">Основні налаштування</div>
              
              <div class="grid grid-cols-1 md:grid-cols-2 gap-5 mb-6">
                <div class="form-control slide-in" style="animation-delay: 0.1s">
                  <label>Фонове зображення</label>
                  <select id="backgroundStyle" class="select">
                    <option value="crisscross">Тканина з крестиками</option>
                    <option value="oldwall">Старі стіни</option>
                    <option value="none">Без фону</option>
                    <option value="gradient">М'який градієнт</option>
                    <option value="dots">Тонкі крапки</option>
                  </select>
                </div>
                
                <div class="form-control slide-in" style="animation-delay: 0.2s">
                  <label>Колір акценту</label>
                  <div class="flex gap-2">
                    <div class="color-option bg-primary-600 active" data-color="primary"></div>
                    <div class="color-option bg-rose-500" data-color="rose"></div>
                    <div class="color-option bg-emerald-500" data-color="emerald"></div>
                    <div class="color-option bg-blue-500" data-color="blue"></div>
                    <div class="color-option bg-purple-500" data-color="purple"></div>
                  </div>
                </div>
                
                <div class="form-control slide-in" style="animation-delay: 0.3s">
                  <label>Шрифт заголовків</label>
                  <select id="headingFont" class="select">
                    <option value="Playfair Display">Playfair Display</option>
                    <option value="Georgia">Georgia</option>
                    <option value="Times New Roman">Times New Roman</option>
                    <option value="serif">Serif</option>
                    <option value="Roboto">Roboto</option>
                    <option value="Montserrat">Montserrat</option>
                  </select>
                </div>
                
                <div class="form-control slide-in" style="animation-delay: 0.4s">
                  <label>Шрифт тексту</label>
                  <select id="bodyFont" class="select">
                    <option value="Inter">Inter</option>
                    <option value="Open Sans">Open Sans</option>
                    <option value="Arial">Arial</option>
                    <option value="Helvetica">Helvetica</option>
                    <option value="sans-serif">Sans-serif</option>
                    <option value="Lato">Lato</option>
                    <option value="Raleway">Raleway</option>
                  </select>
                </div>
                
                <div class="form-control slide-in" style="animation-delay: 0.5s">
                  <label>Розмір тексту <span id="fontSizeValue" class="text-secondary-600 ml-1">100%</span></label>
                  <input type="range" id="fontSize" min="80" max="120" value="100" class="range-slider">
                </div>
                
                <div class="form-control slide-in" style="animation-delay: 0.6s">
                  <label>Мова за замовчуванням</label>
                  <select id="defaultLang" class="select">
                    <option value="ua">Українська</option>
                    <option value="en">English</option>
                  </select>
                </div>
              </div>
              
              <div class="divider"></div>
              
              <div class="section-title mb-5 mt-2">Зміна зображень</div>
              
              <div class="grid grid-cols-1 md:grid-cols-2 gap-5">
                <div class="slide-in" style="animation-delay: 0.7s">
                  <div class="form-control">
                    <label>Фото в розділі "Про мене"</label>
                    <div class="image-upload" onclick="document.getElementById('aboutImageInput').click()">
                      <img id="aboutImagePreview" src="https://placehold.co/400x500/e2e8f0/64748b?text=Фото+про+мене" alt="Фото про мене">
                      <span class="text-secondary-600">Клацніть, щоб змінити фото</span>
                    </div>
                  </div>
                  <input type="file" id="aboutImageInput" accept="image/*" style="display: none;">
                </div>
                
                <div class="slide-in" style="animation-delay: 0.8s">
                  <div class="form-control">
                    <label>Фото в розділі "Контакти"</label>
                    <div class="image-upload" onclick="document.getElementById('contactImageInput').click()">
                      <img id="contactImagePreview" src="https://placehold.co/400x500/e2e8f0/64748b?text=Фото+контакти" alt="Фото контакти">
                      <span class="text-secondary-600">Клацніть, щоб змінити фото</span>
                    </div>
                  </div>
                  <input type="file" id="contactImageInput" accept="image/*" style="display: none;">
                </div>
                
                <div class="slide-in" style="animation-delay: 0.9s">
                  <div class="form-control">
                    <label>Головне зображення (Hero)</label>
                    <div class="image-upload" onclick="document.getElementById('heroImageInput').click()">
                      <img id="heroImagePreview" src="https://placehold.co/1200x600/e2e8f0/64748b?text=Головне+зображення" alt="Головне фото">
                      <span class="text-secondary-600">Клацніть, щоб змінити фото</span>
                    </div>
                  </div>
                  <input type="file" id="heroImageInput" accept="image/*" style="display: none;">
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Layout Tab -->
        <div class="tab-content p-4" id="layoutTab">
          <div class="mb-6">
            <div class="section-title mb-3">Порядок розділів сайту</div>
            <p class="text-secondary-600">Перетягніть розділи, щоб змінити їх порядок на сайті</p>
          </div>
          
          <div id="layoutContainer" class="space-y-2"></div>
          
          <div class="mt-6 p-4 bg-secondary-50 rounded-lg">
            <div class="flex items-start">
              <div class="mr-3 mt-1">
                <i class="fas fa-info-circle text-primary-500"></i>
              </div>
              <div>
                <h4 class="font-semibold text-primary-700 mb-1">Як це працює?</h4>
                <p class="text-secondary-600 text-sm">
                  Порядок розділів визначає, в якій послідовності будуть відображатися секції на вашому сайті. 
                  Перший елемент буде відображатися найвище на сторінці, останній - найнижче.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Save Button -->
      <div class="mb-8">
        <div class="card p-5">
          <div class="flex flex-col md:flex-row md:justify-between md:items-center">
            <div class="mb-4 md:mb-0">
              <h3 class="text-lg font-semibold text-primary-700 mb-1">Готові зберегти зміни?</h3>
              <p class="text-secondary-600">Ваші зміни будуть миттєво відображені на сайті</p>
            </div>
            <button id="saveBtn" class="btn btn-primary px-6 py-2.5 text-base self-end">
              <i class="fas fa-save mr-2"></i> Зберегти зміни
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Preview Button -->
  <div class="preview-panel">
    <div class="preview-btn" id="previewSiteBtnBottom">
      <i class="fas fa-eye text-primary-600"></i>
    </div>
  </div>

  <!-- Notification -->
  <div class="notification" id="notification">
    <div class="notification-icon">
      <i class="fas fa-check-circle"></i>
    </div>
    <div class="notification-message">Зміни успішно збережено!</div>
  </div>

  <!-- Loading Overlay -->
  <div class="loading-overlay" id="loadingOverlay">
    <div class="spinner"></div>
  </div>

  <script>
    // Конфігурація Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyD2DjOu0WUzPBinysNFJgF_223NW9mh7Ts",
      authDomain: "yulia-feb39.firebaseapp.com",
      projectId: "yulia-feb39",
      storageBucket: "yulia-feb39.firebasestorage.app",
      messagingSenderId: "995206586230",
      appId: "1:995206586230:web:457e6802fa6d622e106457",
      measurementId: "G-RQT1XKLPD5"
    };

    // Ініціалізація Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Початкові дані
    let content = {
      siteName: "РетроШвейка",
      footerText: "© 2024 Юлія. Усі права захищені. Створено з любов'ю.",
      telegramLink: "@Ennifer86",
      productsTitle: "Наші вироби",
      productsDescription: "Унікальні ретро вироби, створені з якісних матеріалів. Кожен виріб — це мініатюрне мистецтво.",
      contactsTitle: "Контакти",
      contactsDescription: "Готові замовити виріб або дізнатися більше? Зв'яжіться зі мною!",
      aboutTitle: "Про мене",
      aboutDescription: "Мене звати Олена (Юлія), і я займаюся швейною справою вже 12 років. Моє захоплення ретро стилем почалося зі спадщини моєї бабусі — старовинної швейної машинки і колекції вишитих серветок.\n\nКожен виріб, який я створюю, — це унікальна річ, зроблена вручну з любов'ю до деталей. Я використовую якісні натуральні тканини, старовинні вишивки та класичні фасони, які ніколи не виходять з моди.\n\nМоя мрія — повернути до життя красу ретро стилю і подарувати людям унікальні речі, які будуть радувати роками.",
      heroTitle: "Ретро швейні вироби",
      heroSubtitle: "з душею",
      heroDescription: "У нашій колекції ви знайдете стильні, зручні та унікальні вироби, створені з любов'ю та увагою до деталей."
    };
    
    let products = [];
    
    let design = {
      backgroundStyle: "crisscross",
      headingFont: "Playfair Display",
      bodyFont: "Inter",
      accentColor: "primary",
      fontSize: 100,
      defaultLang: "ua"
    };
    
    let layout = ["home", "products", "about", "contact", "feedback", "footer"];
    
    let images = {
      aboutImage: "https://placehold.co/400x500/e2e8f0/64748b?text=Фото+про+мене",
      contactImage: "https://placehold.co/400x500/e2e8f0/64748b?text=Фото+контакти",
      heroImage: "https://placehold.co/1200x600/e2e8f0/64748b?text=Головне+зображення"
    };
    
    let feedback = {
      telegram: "@Ennifer86",
      email: "yulia.retro@gmail.com",
      phone: "+38 (098) 765-43-21"
    };

    // Функція для показу повідомлення
    function showNotification(message, type = 'success') {
      const notification = document.getElementById('notification');
      const icon = notification.querySelector('.notification-icon i');
      notification.className = 'notification ' + type + ' show';
      
      notification.querySelector('.notification-message').textContent = message;
      
      if (type === 'success') {
        icon.className = 'fas fa-check-circle';
      } else if (type === 'error') {
        icon.className = 'fas fa-exclamation-circle';
      } else if (type === 'warning') {
        icon.className = 'fas fa-exclamation-triangle';
      }
      
      setTimeout(() => {
        notification.classList.remove('show');
      }, 5000);
    }

    // Функція для показу завантаження
    function showLoading(show) {
      const loadingOverlay = document.getElementById('loadingOverlay');
      loadingOverlay.style.display = show ? 'flex' : 'none';
    }

    // Функція для завантаження даних з Firebase
    function loadData() {
      showLoading(true);
      
      const siteDataRef = db.ref('siteData');
      siteDataRef.once('value').then((snapshot) => {
        const data = snapshot.val();
        if (data) {
          content = data.content || content;
          products = data.products || products;
          design = data.design || design;
          layout = data.layout || layout;
          images = data.images || images;
          feedback = data.feedback || feedback;
          
          // Заповнення форм
          document.getElementById('siteName').value = content.siteName;
          document.getElementById('footerText').value = content.footerText;
          document.getElementById('telegramLink').value = content.telegramLink;
          document.getElementById('backgroundStyle').value = design.backgroundStyle;
          document.getElementById('headingFont').value = design.headingFont;
          document.getElementById('bodyFont').value = design.bodyFont;
          document.getElementById('accentColor').value = design.accentColor;
          document.getElementById('fontSize').value = design.fontSize;
          document.getElementById('fontSizeValue').textContent = design.fontSize + '%';
          document.getElementById('defaultLang').value = design.defaultLang;
          document.getElementById('feedbackTelegram').value = feedback.telegram;
          document.getElementById('feedbackEmail').value = feedback.email;
          document.getElementById('feedbackPhone').value = feedback.phone;
          
          // Заповнення нових полів
          document.getElementById('productsTitle').value = content.productsTitle || "Наші вироби";
          document.getElementById('productsDescription').value = content.productsDescription || "Унікальні ретро вироби, створені з якісних матеріалів. Кожен виріб — це мініатюрне мистецтво.";
          document.getElementById('contactsTitle').value = content.contactsTitle || "Контакти";
          document.getElementById('contactsDescription').value = content.contactsDescription || "Готові замовити виріб або дізнатися більше? Зв'яжіться зі мною!";
          document.getElementById('aboutTitle').value = content.aboutTitle || "Про мене";
          document.getElementById('aboutDescription').value = content.aboutDescription || "Мене звати Олена (Юлія), і я займаюся швейною справою вже 12 років. Моє захоплення ретро стилем почалося зі спадщини моєї бабусі — старовинної швейної машинки і колекції вишитих серветок.\n\nКожен виріб, який я створюю, — це унікальна річ, зроблена вручну з любов'ю до деталей. Я використовую якісні натуральні тканини, старовинні вишивки та класичні фасони, які ніколи не виходять з моди.\n\nМоя мрія — повернути до життя красу ретро стилю і подарувати людям унікальні речі, які будуть радувати роками.";
          document.getElementById('heroTitle').value = content.heroTitle || "Ретро швейні вироби";
          document.getElementById('heroSubtitle').value = content.heroSubtitle || "з душею";
          document.getElementById('heroDescription').value = content.heroDescription || "У нашій колекції ви знайдете стильні, зручні та унікальні вироби, створені з любов'ю та увагою до деталей.";
          
          // Оновлення прев'ю зображень
          document.getElementById('aboutImagePreview').src = images.aboutImage;
          document.getElementById('contactImagePreview').src = images.contactImage;
          document.getElementById('heroImagePreview').src = images.heroImage;
          
          // Оновлення розташування та товарів
          updateLayoutPreview();
          renderProductsList();
        }
      }).catch((error) => {
        console.error("Помилка при завантаженні даних:", error);
        showNotification('Не вдалося завантажити дані з Firebase. Перевірте підключення до інтернету.', 'error');
      }).finally(() => {
        showLoading(false);
      });

      // Слухач для реального часу
      siteDataRef.on('value', (snapshot) => {
        const data = snapshot.val();
        if (data) {
          content = data.content || content;
          products = data.products || products;
          design = data.design || design;
          layout = data.layout || layout;
          images = data.images || images;
          feedback = data.feedback || feedback;
          
          // Оновлення прев'ю зображень
          document.getElementById('aboutImagePreview').src = images.aboutImage;
          document.getElementById('contactImagePreview').src = images.contactImage;
          document.getElementById('heroImagePreview').src = images.heroImage;
          
          // Оновлення розташування та товарів
          updateLayoutPreview();
          renderProductsList();
        }
      });
    }

    // Перемикач вкладок
    function setupTabSwitching() {
      document.querySelectorAll('.tab-btn, .sidebar-item').forEach(btn => {
        btn.addEventListener('click', () => {
          const tabName = btn.getAttribute('data-tab');
          
          // Оновлюємо активну вкладку в горизонтальному меню
          document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
          document.querySelector(`.tab-btn[data-tab="${tabName}"]`).classList.add('active');
          
          // Оновлюємо активну вкладку в сайдбарі
          document.querySelectorAll('.sidebar-item').forEach(b => b.classList.remove('active'));
          document.querySelector(`.sidebar-item[data-tab="${tabName}"]`).classList.add('active');
          
          // Ховаємо всі вкладки
          document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
          // Показуємо вкладку, яка відповідає кнопці
          document.getElementById(`${tabName}Tab`).classList.add('active');
        });
      });
    }

    function updateLayoutPreview() {
      const container = document.getElementById('layoutContainer');
      container.innerHTML = '';
      layout.forEach((section, index) => {
        const div = document.createElement('div');
        div.className = 'sortable';
        div.dataset.section = section;
        div.draggable = true;
        
        const sectionNames = {
          home: '🏠 Головна сторінка',
          products: '🛍️ Товари',
          about: '👩‍🔧 Про мене',
          contact: '📞 Контакти',
          feedback: '💬 Зворотній зв\'язок',
          footer: '🔖 Футер'
        };
        
        const sectionDescriptions = {
          home: 'Головний розділ сайту з вітанням',
          products: 'Список ваших товарів',
          about: 'Інформація про вас та вашу роботу',
          contact: 'Контактна інформація та форма зв\'язку',
          feedback: 'Форма зворотного зв\'язку',
          footer: 'Нижній колонтитул з контактами'
        };
        
        div.innerHTML = `
          <div class="drag-handle">
            <i class="fas fa-grip-lines"></i>
          </div>
          <div class="flex-1">
            <div class="font-medium">${sectionNames[section]}</div>
            <div class="text-secondary-500 text-sm">${sectionDescriptions[section]}</div>
          </div>
          <div class="ml-2">
            <span class="badge badge-primary">${index + 1}</span>
          </div>
        `;
        
        container.appendChild(div);
      });
      addDragEvents();
    }

    function addDragEvents() {
      const items = document.querySelectorAll('.sortable');
      items.forEach(item => {
        item.addEventListener('dragstart', e => {
          e.dataTransfer.setData('text/plain', e.target.dataset.section);
          item.classList.add('drag-preview');
        });
        item.addEventListener('dragend', e => {
          item.classList.remove('drag-preview');
        });
        
        item.addEventListener('dragover', e => {
          e.preventDefault();
          const draggingElement = document.querySelector('.drag-preview');
          const container = draggingElement.parentNode;
          const afterElement = getDragAfterElement(container, e.clientY);
          
          if (afterElement == null) {
            container.appendChild(draggingElement);
          } else {
            container.insertBefore(draggingElement, afterElement);
          }
        });
      });
    }

    function getDragAfterElement(container, y) {
      const draggableElements = [...container.querySelectorAll('.sortable:not(.drag-preview)')];
      
      return draggableElements.reduce((closest, child) => {
        const box = child.getBoundingClientRect();
        const offset = y - box.top - box.height / 2;
        
        if (offset < 0 && offset > closest.offset) {
          return { offset: offset, element: child };
        } else {
          return closest;
        }
      }, { offset: Number.NEGATIVE_INFINITY }).element;
    }

    // Обробка зображень
    function setupImageUploads() {
      ['newProdImageInput', 'aboutImageInput', 'contactImageInput', 'heroImageInput'].forEach(id => {
        document.getElementById(id).addEventListener('change', function(e) {
          if (e.target.files[0]) {
            const reader = new FileReader();
            reader.onload = ev => {
              const previewId = id.replace('Input', 'Preview');
              document.getElementById(previewId).src = ev.target.result;
            };
            reader.readAsDataURL(e.target.files[0]);
          }
        });
      });
    }

    function renderProductsList() {
      const container = document.getElementById('productsList');
      const productsCount = document.getElementById('productsCount');
      
      if (!container) return;
      
      container.innerHTML = '';
      
      if (products.length === 0) {
        container.innerHTML = `
          <div class="col-span-full text-center py-12 bg-secondary-50 rounded-xl">
            <div class="w-16 h-16 rounded-full bg-secondary-100 flex items-center justify-center mx-auto mb-4">
              <i class="fas fa-box-open text-2xl text-secondary-500"></i>
            </div>
            <h3 class="text-lg font-medium text-secondary-700 mb-1">Ще немає товарів</h3>
            <p class="text-secondary-500 mb-4">Додайте свій перший товар, щоб почати продажі</p>
            <button id="addFirstProductBtn" class="btn btn-primary px-4 py-2">
              <i class="fas fa-plus mr-2"></i> Додати перший товар
            </button>
          </div>
        `;
        
        // Додаємо обробник для кнопки додавання першого товару
        document.getElementById('addFirstProductBtn')?.addEventListener('click', () => {
          document.querySelector('.sidebar-item[data-tab="products"]').click();
        });
      } else {
        productsCount.textContent = products.length;
        
        products.forEach((prod, index) => {
          const item = document.createElement('div');
          item.className = 'product-card-admin scale-in';
          item.style.animationDelay = `${0.1 + index * 0.05}s`;
          
          item.innerHTML = `
            <img src="${prod.img}" alt="${prod.name.ua}" class="product-img-admin">
            <div class="p-4">
              <div class="flex justify-between items-start mb-2">
                <h4 class="font-bold text-base text-primary-800">${prod.name.ua}</h4>
                <div class="flex space-x-1">
                  <button onclick="editProduct(${index})" class="btn-icon btn-secondary text-sm" title="Редагувати">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button onclick="deleteProduct(${index})" class="btn-icon btn-danger text-sm" title="Видалити">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </div>
              <div class="text-primary-600 font-semibold mb-2">${prod.price} ₴</div>
              <p class="text-secondary-600 text-sm line-clamp-2">${prod.desc.ua}</p>
              <div class="mt-3 flex flex-wrap">
                <span class="product-tag bg-primary-50 text-primary-700">Новинка</span>
                <span class="product-tag bg-emerald-50 text-emerald-700">У наявності</span>
              </div>
            </div>
          `;
          container.appendChild(item);
        });
      }
    }

    window.editProduct = function(index) {
      const prod = products[index];
      document.getElementById('newProdNameUa').value = prod.name.ua;
      document.getElementById('newProdNameEn').value = prod.name.en;
      document.getElementById('newProdPrice').value = prod.price;
      document.getElementById('newProdDescUa').value = prod.desc.ua;
      document.getElementById('newProdDescEn').value = prod.desc.en;
      document.getElementById('newProdImagePreview').src = prod.img;
      products.splice(index, 1);
      renderProductsList();
      
      // Прокручуємо до форми додавання товару
      document.querySelector('.card.mb-6.scale-in').scrollIntoView({ behavior: 'smooth' });
    };

    window.deleteProduct = function(index) {
      if (confirm('Ви дійсно бажаєте видалити цей товар? Цю дію неможливо скасувати.')) {
        products.splice(index, 1);
        renderProductsList();
        showNotification('Товар успішно видалено');
      }
    };

    // Додавання товару
    function setupAddProduct() {
      document.getElementById('addProductBtn').addEventListener('click', () => {
        const nameUa = document.getElementById('newProdNameUa').value.trim();
        const nameEn = document.getElementById('newProdNameEn').value.trim();
        const price = document.getElementById('newProdPrice').value.trim();
        const descUa = document.getElementById('newProdDescUa').value.trim();
        const descEn = document.getElementById('newProdDescEn').value.trim();
        const img = document.getElementById('newProdImagePreview').src;
        
        if (!nameUa || !nameEn || !price || !descUa || !descEn) {
          showNotification('Будь ласка, заповніть усі поля', 'warning');
          return;
        }
        
        // Перевірка, чи це новий товар чи редагування існуючого
        const editingIndex = Array.from(document.querySelectorAll('.product-card-admin')).findIndex(card => 
          card.querySelector('h4').textContent === nameUa);
        
        const product = {
          id: Date.now().toString(),
          name: { ua: nameUa, en: nameEn },
          desc: { ua: descUa, en: descEn },
          price,
          img
        };
        
        if (editingIndex !== -1) {
          products[editingIndex] = product;
        } else {
          products.push(product);
        }
        
        // Очищення форми
        document.getElementById('newProdNameUa').value = '';
        document.getElementById('newProdNameEn').value = '';
        document.getElementById('newProdPrice').value = '';
        document.getElementById('newProdDescUa').value = '';
        document.getElementById('newProdDescEn').value = '';
        document.getElementById('newProdImagePreview').src = 'https://placehold.co/300x300/e2e8f0/64748b?text=Завантажте+фото';
        
        renderProductsList();
        showNotification(editingIndex !== -1 ? 'Товар оновлено' : 'Товар додано успішно');
      });
    }

    // Обробка зміни розміру шрифту
    function setupFontSize() {
      document.getElementById('fontSize').addEventListener('input', () => {
        const value = document.getElementById('fontSize').value;
        document.getElementById('fontSizeValue').textContent = value + '%';
      });
    }

    // Обробка вибору кольору
    function setupColorSelection() {
      document.querySelectorAll('.color-option').forEach(option => {
        option.addEventListener('click', () => {
          document.querySelectorAll('.color-option').forEach(o => o.classList.remove('active'));
          option.classList.add('active');
          design.accentColor = option.dataset.color;
        });
      });
    }

    // Збереження даних у Firebase
    function setupSaveFunctionality() {
      document.getElementById('saveBtn').addEventListener('click', () => {
        showLoading(true);
        
        const content = {
          siteName: document.getElementById('siteName').value,
          footerText: document.getElementById('footerText').value,
          telegramLink: document.getElementById('telegramLink').value,
          productsTitle: document.getElementById('productsTitle').value,
          productsDescription: document.getElementById('productsDescription').value,
          contactsTitle: document.getElementById('contactsTitle').value,
          contactsDescription: document.getElementById('contactsDescription').value,
          aboutTitle: document.getElementById('aboutTitle').value,
          aboutDescription: document.getElementById('aboutDescription').value,
          heroTitle: document.getElementById('heroTitle').value,
          heroSubtitle: document.getElementById('heroSubtitle').value,
          heroDescription: document.getElementById('heroDescription').value
        };
        
        const design = {
          backgroundStyle: document.getElementById('backgroundStyle').value,
          headingFont: document.getElementById('headingFont').value,
          bodyFont: document.getElementById('bodyFont').value,
          accentColor: document.querySelector('.color-option.active')?.dataset.color || 'primary',
          fontSize: parseInt(document.getElementById('fontSize').value),
          defaultLang: document.getElementById('defaultLang').value
        };
        
        const images = {
          aboutImage: document.getElementById('aboutImagePreview').src,
          contactImage: document.getElementById('contactImagePreview').src,
          heroImage: document.getElementById('heroImagePreview').src
        };
        
        const feedback = {
          telegram: document.getElementById('feedbackTelegram').value,
          email: document.getElementById('feedbackEmail').value,
          phone: document.getElementById('feedbackPhone').value
        };
        
        // Збереження в Firebase
        const siteDataRef = db.ref('siteData');
        siteDataRef.set({
          content: content,
          products: products,
          design: design,
          layout: layout,
          images: images,
          feedback: feedback
        }).then(() => {
          showNotification('Усі зміни успішно збережено!');
        }).catch(error => {
          console.error("Помилка при збереженні даних:", error);
          showNotification('Помилка при збереженні даних. Перевірте підключення до інтернету.', 'error');
        }).finally(() => {
          showLoading(false);
        });
      });
    }

    // Перегляд сайту
    function setupPreviewSite() {
      document.querySelectorAll('#previewSiteBtn, #previewSiteBtnBottom').forEach(btn => {
        btn.addEventListener('click', () => {
          window.location.href = 'index.html';
        });
      });
    }

    // Мобільне меню
    function setupMobileMenu() {
      const mobileMenuBtn = document.getElementById('mobileMenuBtn');
      const sidebar = document.getElementById('sidebar');
      
      mobileMenuBtn.addEventListener('click', () => {
        sidebar.classList.toggle('open');
      });
      
      // Закриття сайдбару при кліку поза ним
      document.addEventListener('click', (e) => {
        if (sidebar.classList.contains('open') && 
            !sidebar.contains(e.target) && 
            !e.target.closest('.mobile-menu-btn')) {
          sidebar.classList.remove('open');
        }
      });
    }

    // Ініціалізація
    function init() {
      setupTabSwitching();
      setupImageUploads();
      setupAddProduct();
      setupFontSize();
      setupColorSelection();
      setupSaveFunctionality();
      setupPreviewSite();
      setupMobileMenu();
      
      // Завантаження даних при завантаженні сторінки
      window.addEventListener('load', loadData);
      
      // Зміна порядку розділів через перетягування
      document.getElementById('layoutContainer')?.addEventListener('drop', function(e) {
        e.preventDefault();
        const sectionId = e.dataTransfer.getData('text/plain');
        const fromIndex = layout.indexOf(sectionId);
        const container = e.target.closest('#layoutContainer') || e.target;
        const afterElement = getDragAfterElement(container, e.clientY);
        const toIndex = afterElement ? 
          Array.from(container.children).indexOf(afterElement) : 
          container.children.length;
          
        if (fromIndex !== -1 && fromIndex !== toIndex) {
          layout.splice(fromIndex, 1);
          layout.splice(toIndex, 0, sectionId);
          updateLayoutPreview();
        }
      });
      
      // Дозволити drop на контейнері
      document.getElementById('layoutContainer')?.addEventListener('dragover', e => {
        e.preventDefault();
      });
    }

    // Запуск ініціалізації після завантаження DOM
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>